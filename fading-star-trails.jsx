// bring Photoshop into focus// This also allows you to simply double click the JSX file#target photoshopvar FadingStarTrails = FadingStarTrails || {    // create a group of layers    newGroupFromLayers: function(doc) {        var desc = new ActionDescriptor();        var ref = new ActionReference();        ref.putClass( this.sTID('layerSection') );        desc.putReference( this.cTID('null'), ref );        var lref = new ActionReference();        lref.putEnumerated( this.cTID('Lyr '), this.cTID('Ordn'), this.cTID('Trgt') );        desc.putReference( this.cTID('From'), lref);        executeAction( this.cTID('Mk  '), desc, DialogModes.NO );    },    // get the currently selected layer    getSelectedLayers: function(doc) {        var selLayers = [];        this.newGroupFromLayers();        var group = doc.activeLayer;        var layers = group.layers;        for (var i = 0; i < layers.length; i++) {            selLayers.push(layers[i]);        }        this.undo();        return selLayers;    },    // utilityiesto get the string representation (selection type)    cTID: function(s) {        return app.charIDToTypeID(s);    },    sTID: function(s) {        return app.stringIDToTypeID(s);    },    // undo action    undo: function() {        executeAction(this.cTID("undo", undefined, DialogModes.NO));    },    // start the script    init: function() {        // set some variables        var documentReference = app.activeDocument;                // get currently selected layers        var selectedLayers = this.getSelectedLayers(app.activeDocument);        // compute opacity difference between layers        var steps = 100/selectedLayers.length + 1;        // loop through every selected layers         for( i = 0; i < selectedLayers.length; i++) {            // select current layer            selectedLayers[i].selected = true;            // set as active layer            documentReference.activeLayer = selectedLayers[i];            // change blend mode to 'Lighten'            documentReference.activeLayer.blendMode = BlendMode.LIGHTEN;            // change opacity             // using Math.abs to be sure the value is always greater that 0            documentReference.activeLayer.opacity = Math.abs(Math.floor(100 - (i * steps)));         }    }}FadingStarTrails.init();